<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Daily Branch Checklist</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    font-family: Arial, sans-serif;
    background: #f4f6f8;
    padding: 20px;
}
h2 {
    text-align: center;
}
form {
    background: #fff;
    max-width: 900px;
    margin: auto;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
}
.field {
    margin-bottom: 15px;
}
label {
    font-weight: bold;
    display: block;
    margin-bottom: 5px;
}
input[type="text"] {
    width: 100%;
    padding: 8px;
}
.options label {
    font-weight: normal;
    margin-right: 15px;
}
.remark {
    display: none;
    margin-top: 6px;
}
button {
    background: #007bff;
    color: white;
    border: none;
    padding: 12px 25px;
    font-size: 16px;
    border-radius: 5px;
    cursor: pointer;
}
button:hover {
    background: #0056b3;
}
</style>
</head>

<body>

<h2>Daily Branch Checklist</h2>

<form id="checklistForm">

<div class="field">
    <label>Branch Name</label>
    <input type="text" name="branchName" required>
</div>

<div class="field">
    <label>Name of Person</label>
    <input type="text" name="personName" required>
</div>

<!-- QUESTIONS START -->

<script>
function questionBlock(no, text, na=false){
    document.write(`
    <div class="field">
        <label>${no}) ${text}</label>
        <div class="options">
            <label><input type="radio" name="q${no}" value="Yes" required onclick="toggleRemark('q${no}',false)"> Yes</label>
            <label><input type="radio" name="q${no}" value="No" onclick="toggleRemark('q${no}',true)"> No</label>
            ${na ? `<label><input type="radio" name="q${no}" value="NA" onclick="toggleRemark('q${no}',false)"> NA</label>` : ``}
        </div>
        <input type="text" class="remark" id="q${no}_remark" name="q${no}_remark" placeholder="Enter remark">
    </div>
    `);
}
</script>

<script>
questionBlock(1,"Branch opened on time?");
questionBlock(2,"Water Dispenser working?");
questionBlock(3,"Tea / Coffee Machine working?",true);
questionBlock(4,"HK person / Security Guard reported on time?");
questionBlock(5,"Biometric machine working?");
questionBlock(6,"Biometric door lock working?");
questionBlock(7,"CCTV system working?");
questionBlock(8,"All AC working?");
questionBlock(9,"UPS working?");
questionBlock(10,"Any incident happened in branch?");
questionBlock(11,"Washroom checklist updated?");
questionBlock(12,"Electricity bill submitted to admin?");
questionBlock(13,"Leakage / Seepage / Bad smell?");
</script>

<button type="submit">Submit</button>

</form>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyRzHgu1dG_v_ckqv7lN19Fnq1kECnjINm43ncqfgeeON0WSCG2I4MJ_IMwWj5IkvSP/exec";

function toggleRemark(q, show) {
    document.getElementById(q + "_remark").style.display = show ? "block" : "none";
}

document.getElementById("checklistForm").addEventListener("submit", function(e){
    e.preventDefault();

    const formData = new FormData(this);
    const data = {};
    data.submissionDate = new Date().toLocaleString();

    formData.forEach((value, key) => {
        data[key] = value || "";
    });

    fetch(SCRIPT_URL, {
        method: "POST",
        body: JSON.stringify(data),
        headers: { "Content-Type": "application/json" }
    })
    .then(res => res.json())
    .then(() => {
        alert("Form submitted successfully!");
        this.reset();
        document.querySelectorAll(".remark").forEach(r => r.style.display="none");
    })
    .catch(() => {
        alert("Submission failed. Please try again.");
    });
});
</script>

</body>
</html>
