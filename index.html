<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Daily Branch Checklist</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  body {
    font-family: Arial, sans-serif;
    background: #f4f6f8;
    padding: 20px;
  }
  h2 {
    text-align: center;
  }
  form {
    background: #ffffff;
    padding: 20px;
    max-width: 850px;
    margin: auto;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }
  .field {
    margin-bottom: 15px;
  }
  label {
    font-weight: bold;
  }
  .question {
    margin-top: 15px;
  }
  .options label {
    margin-right: 20px;
    font-weight: normal;
  }
  input[type="text"], textarea {
    width: 100%;
    padding: 8px;
    margin-top: 6px;
  }
  #remarksSection {
    display: none;
    margin-top: 20px;
  }
  button {
    margin-top: 25px;
    padding: 12px;
    width: 100%;
    background: #007bff;
    color: #ffffff;
    border: none;
    font-size: 16px;
    border-radius: 5px;
    cursor: pointer;
  }
  button:hover {
    background: #0056b3;
  }
</style>
</head>

<body>

<h2>Daily Branch Checklist</h2>

<form id="dailyForm">

  <div class="field">
    <label>Branch Name</label>
    <input type="text" id="branchName" required>
  </div>

  <div class="field">
    <label>Name of Person</label>
    <input type="text" id="personName" required>
  </div>

  <!-- QUESTIONS -->
  <div class="question">1) Branch opened on time?
    <div class="options">
      <label><input type="radio" name="q1" value="Yes" required> Yes</label>
      <label><input type="radio" name="q1" value="No"> No</label>
    </div>
  </div>

  <div class="question">2) Water Dispenser working?
    <div class="options">
      <label><input type="radio" name="q2" value="Yes" required> Yes</label>
      <label><input type="radio" name="q2" value="No"> No</label>
    </div>
  </div>

  <div class="question">3) Tea / Coffee Machine working?
    <div class="options">
      <label><input type="radio" name="q3" value="Yes" required> Yes</label>
      <label><input type="radio" name="q3" value="No"> No</label>
      <label><input type="radio" name="q3" value="NA"> NA</label>
    </div>
  </div>

  <div class="question">4) HK / Security reported on time?
    <div class="options">
      <label><input type="radio" name="q4" value="Yes" required> Yes</label>
      <label><input type="radio" name="q4" value="No"> No</label>
    </div>
  </div>

  <div class="question">5) Biometric machine working?
    <div class="options">
      <label><input type="radio" name="q5" value="Yes" required> Yes</label>
      <label><input type="radio" name="q5" value="No"> No</label>
    </div>
  </div>

  <div class="question">6) Biometric door lock working?
    <div class="options">
      <label><input type="radio" name="q6" value="Yes" required> Yes</label>
      <label><input type="radio" name="q6" value="No"> No</label>
    </div>
  </div>

  <div class="question">7) CCTV system working?
    <div class="options">
      <label><input type="radio" name="q7" value="Yes" required> Yes</label>
      <label><input type="radio" name="q7" value="No"> No</label>
    </div>
  </div>

  <div class="question">8) All AC working?
    <div class="options">
      <label><input type="radio" name="q8" value="Yes" required> Yes</label>
      <label><input type="radio" name="q8" value="No"> No</label>
    </div>
  </div>

  <div class="question">9) UPS working?
    <div class="options">
      <label><input type="radio" name="q9" value="Yes" required> Yes</label>
      <label><input type="radio" name="q9" value="No"> No</label>
    </div>
  </div>

  <div class="question">10) Any incident happened?
    <div class="options">
      <label><input type="radio" name="q10" value="Yes" required> Yes</label>
      <label><input type="radio" name="q10" value="No"> No</label>
    </div>
  </div>

  <div class="question">11) Washroom checklist updated?
    <div class="options">
      <label><input type="radio" name="q11" value="Yes" required> Yes</label>
      <label><input type="radio" name="q11" value="No"> No</label>
    </div>
  </div>

  <div class="question">12) Electricity bill submitted?
    <div class="options">
      <label><input type="radio" name="q12" value="Yes" required> Yes</label>
      <label><input type="radio" name="q12" value="No"> No</label>
    </div>
  </div>

  <div class="question">13) Leakage / Seepage / Bad smell?
    <div class="options">
      <label><input type="radio" name="q13" value="Yes" required> Yes</label>
      <label><input type="radio" name="q13" value="No"> No</label>
    </div>
  </div>

  <!-- REMARKS -->
  <div id="remarksSection">
    <label>Remarks (Mandatory if any answer is No)</label>
    <textarea id="remarks" rows="3"></textarea>
  </div>

  <button type="submit">Submit</button>
</form>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbyRzHgu1dG_v_ckqv7lN19Fnq1kECnjINm43ncqfgeeON0WSCG2I4MJ_IMwWj5IkvSP/exec";

const questions = ["q1","q2","q3","q4","q5","q6","q7","q8","q9","q10","q11","q12","q13"];

document.querySelectorAll('input[type="radio"]').forEach(radio => {
  radio.addEventListener("change", toggleRemarks);
});

function toggleRemarks() {
  let hasNo = false;

  questions.forEach(q => {
    const selected = document.querySelector(`input[name="${q}"]:checked`);
    if (selected && selected.value === "No") {
      hasNo = true;
    }
  });

  const remarksSection = document.getElementById("remarksSection");
  const remarks = document.getElementById("remarks");

  if (hasNo) {
    remarksSection.style.display = "block";
    remarks.required = true;
  } else {
    remarksSection.style.display = "none";
    remarks.required = false;
    remarks.value = "";
  }
}

document.getElementById("dailyForm").addEventListener("submit", function(e) {
  e.preventDefault();

  const data = {
    branchName: branchName.value,
    personName: personName.value,
    remarks: remarks.value
  };

  questions.forEach(q => {
    data[q] = document.querySelector(`input[name="${q}"]:checked`).value;
  });

  fetch(scriptURL, {
    method: "POST",
    body: JSON.stringify(data)
  })
  .then(res => res.json())
  .then(resp => {
    if (resp.status === "success") {
      alert("✅ Data submitted successfully");
      this.reset();
      document.getElementById("remarksSection").style.display = "none";
    } else {
      alert("❌ Submission failed");
    }
  })
  .catch(() => alert("❌ Network error"));
});
</script>

</body>
</html>
